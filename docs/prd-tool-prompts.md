# PRD工具提示词文档

## 概述

PRD工具是PM助手中的核心功能，帮助产品经理通过结构化的步骤快速生成高质量的产品需求文档。本文档记录了PRD工具中8个核心AI功能的最新提示词设计。

## 工具架构

PRD工具采用模块化设计，包含以下8个核心AI功能：

1. **用户场景扩展** - 基于需求介绍分析用户使用场景
2. **需求目标生成** - 根据用户场景制定明确的产品目标
3. **竞品分析** - 通过联网搜索分析市场竞争对手
4. **功能建议** - 提供具体的产品功能建议
5. **业务逻辑建议** - 设计详细的业务流程逻辑
6. **边缘场景建议** - 分析异常情况和边缘案例
7. **内容审查** - 对填写的PRD内容进行质量评分
8. **PRD生成** - 基于所有输入生成完整的PRD文档

---

## 1. 用户场景扩展 (expand-user-scenarios)

### 功能描述
基于用户填写的需求介绍，深入分析并扩展用户使用场景，生成3-5个典型的用户场景。

### 是否需要联网
❌ 不需要

### 提示词核心要求
- 生成3-5个典型且具有代表性的用户场景
- 每个场景要具体、实用，避免泛泛而谈
- 痛点分析要深入、有针对性，体现真实的用户痛点
- 覆盖不同类型的用户群体和使用情境
- 使用场景避免出现人名（用字母代替）

### 输出格式
```json
[
  {
    "userType": "用户类型",
    "scenario": "使用场景",
    "painPoint": "痛点分析"
  }
]
```

---

## 2. 需求目标生成 (generate-requirement-goal)

### 功能描述
基于需求介绍和用户场景分析，生成清晰、具体、可衡量的需求目标。

### 是否需要联网
❌ 不需要

### 提示词核心要求
- 明确针对哪类用户群体
- 明确要解决哪类用户群体的核心痛点
- 说明通过什么方式解决
- 描述预期达到的具体效果，避免带有数据性的语句（例如活跃度提升30%，因为短期无法量化）

### 输出格式
直接输出文本形式的需求目标。

---

## 3. 竞品分析 (competitor-analysis)

### 功能描述
通过联网搜索获取最新市场信息，分析相关竞争对手的产品特点、优劣势，以及在竞品在该功能上的特性、面向的用户类型。横向比较并提供差异化建议。

### 是否需要联网
✅ 需要（启用Web搜索）

### 提示词核心要求
- 找出3-5个主要竞争对手
- 各竞品的核心功能特点（详细描述，至少100字）
- 优劣势深度分析，包含功能特点，用户体验（各至少80字）
- 市场机会与差异化建议（至少150字深度分析）
- 严格JSON格式输出，不添加任何解释文字

### 详细分析维度
1. **主要竞品识别**：产品名称、公司背景、市场地位
2. **功能深度分析**：主要功能模块、技术架构、用户体验设计
3. **优劣势深度分析**：功能亮点、用户体验优势、技术问题、用户痛点
4. **市场地位分析**：用户规模、商业模式、行业影响力

### 输出格式
```json
{
  "competitors": [
    {
      "name": "竞品名称",
      "features": "核心功能特点和技术方案的详细描述（至少100字）",
      "advantages": "主要优势和亮点的深入分析（至少80字）",
      "disadvantages": "不足和问题的详细分析（至少80字）",
      "marketPosition": "市场地位、用户规模、商业模式的详细描述"
    }
  ],
  "summary": "整体分析总结和差异化机会建议（至少150字）"
}
```

---

## 4. 功能建议 (suggest-features)

### 功能描述
基于需求描述和用户场景，提供具体的产品功能建议，包括功能拆解、价值分析和优先级排序。

### 是否需要联网
❌ 不需要

### 提示词核心要求
- **功能解构**：将需求拆解为具体的功能模块
- **用户价值**：每个功能对用户的具体价值
- **实现复杂度**：评估技术实现难度
- **优先级排序**：根据价值和复杂度进行排序

### 输出格式
```json
[
  {
    "featureName": "功能名称",
    "description": "功能详细描述",
    "workflow": "用户使用流程",
    "value": "用户价值说明",
    "complexity": "实现复杂度(低/中/高)",
    "priority": "优先级(高/中/低)"
  }
]
```

---

## 5. 业务逻辑建议 (suggest-business-logic)

### 功能描述
为特定功能设计详细的业务逻辑，包括核心流程、判断条件、数据流转等。

### 是否需要联网
❌ 不需要

### 提示词核心要求
- **核心流程**：主要业务流程步骤
- **判断条件**：关键决策点和判断逻辑
- **数据流转**：数据在系统中的流动过程
- **状态管理**：不同状态的定义和转换规则
- **权限控制**：用户权限和操作限制
- **异常处理**：异常情况的处理机制

### 输出格式
结构化的文本内容，包含业务逻辑的各个方面。

---

## 6. 边缘场景建议 (suggest-edge-cases)

### 功能描述
分析功能可能遇到的边缘场景和异常情况，提供解决方案建议。

### 是否需要联网
❌ 不需要

### 提示词核心要求
- **输入异常**：非法、超限、空值等输入场景
- **状态异常**：系统状态不正常时的处理
- **网络异常**：网络中断、超时等情况
- **并发场景**：多用户同时操作的冲突处理
- **数据异常**：数据不一致、丢失等情况
- **权限边界**：权限不足、越权操作等
- **性能极限**：大数据量、高并发等极限情况

### 输出格式
```json
[
  {
    "category": "场景分类",
    "scenario": "具体场景描述",
    "issue": "可能产生的问题",
    "solution": "解决方案建议"
  }
]
```

---

## 7. 内容审查 (review-content)

### 功能描述
对已填写的PRD内容进行专业审查和评分，提供改进建议。**特别强化对需求方案的严格检查。**

### 是否需要联网
✅ 需要（获取最新最佳实践）

### 核心评分逻辑

#### 强制评分规则
1. **需求方案为空**：
   - requirementSolution 为空、null、undefined 或空数组时
   - 方案设计直接得0分，总分最高55分，isReadyForGeneration 必须为 false
   
2. **需求方案不足**：
   - 只有1-2个简单需求，缺少关键字段时
   - 方案设计得分不超过20分，总分很难超过60分
   
3. **60分及格线**：
   - 只有需求方案齐全且质量较好的PRD才能超过60分
   - 低于60分必须设置 isReadyForGeneration: false

#### 评分标准（总分100分）
1. **方案设计（45分）**：PRD的核心，必须严格评分
   - 需求方案存在性（20分）：如果没有任何需求方案，直接扣除全部20分
   - 需求拆解合理性（10分）：需求名称、功能描述的完整性和逻辑性
   - 业务逻辑完善度（10分）：业务流程、数据需求、边缘处理的详细程度
   - 方案可执行性（5分）：技术可行性、验收标准的明确性
   
2. **需求完整性（20分）**：需求介绍、目标、背景是否完整清晰
3. **用户价值（20分）**：用户场景、痛点分析是否深入准确
4. **项目规划（15分）**：技术实现、项目管理、人员配置是否合理

### 输出格式
```json
{
  "score": 75,
  "isReadyForGeneration": true,
  "issues": [
    {
      "level": "warning|error|info",
      "field": "字段名",
      "message": "问题描述",
      "suggestion": "改进建议"
    }
  ],
  "summary": "总体评价",
  "recommendations": ["建议1", "建议2"]
}
```

---

## 8. PRD生成 (generate-prd)

### 功能描述
基于所有填写的数据和分析结果，生成完整、专业、规范的产品需求文档。

### 是否需要联网
❌ 不需要

### 核心原则
- **严格基于数据**：所有内容必须来源于表单数据，禁止自行添加未提供的信息
- **归纳整理为主**：核心任务是将零散数据用专业语言串联成结构化文档
- **避免过度扩展**：不要进行大量的细节补充或二次创作
- **保持精炼性**：内容简洁明了，避免冗余描述

### 文档结构
1. **需求介绍** - 产品背景、团队配置、变更记录
2. **需求分析** - 用户场景分析、需求目标
3. **竞品分析** - 竞品对比表格
4. **需求方案** - 需求方案详细表格
5. **其余事项** - 相关文档、功能迭代历史

### 表格设计要点
- **团队成员配置**：横向布局，角色名作列头
- **大表格横向滚动**：用户场景、竞品分析、需求方案都支持横向滚动
- **缺失数据处理**：未填写字段统一显示"暂未提及"

### 输出格式
标准markdown格式的完整PRD文档，具有响应式表格和专业排版。

---

## 工作流程

PRD工具的典型使用流程：

1. **需求介绍填写** → 触发**用户场景扩展**
2. **用户场景完善** → 触发**需求目标生成**
3. **需求目标确定** → 触发**竞品分析**
4. **功能方案设计** → 使用**功能建议**、**业务逻辑建议**、**边缘场景建议**
5. **内容完善后** → 进行**内容审查**（严格检查需求方案）
6. **审查通过后** → 进行**PRD生成**

## 技术实现要点

### 提示词管理架构
```
pm-assistant/src/prompts/
├── types.ts              # 类型安全的数据接口定义
├── prd-prompts.ts         # 8个核心AI功能的提示词
└── index.ts               # 统一导出管理
```

### API设计
- 所有功能通过统一的 `/api/ai-prd` 端点处理
- 使用 `function` 参数区分不同的AI功能
- 支持多种AI模型（默认使用 `gemini-2.0-flash`）

### 核心优势
- **类型安全**：所有提示词函数都有明确的TypeScript类型
- **易于维护**：提示词修改无需触及业务逻辑代码
- **一致性强**：确保不同调用点使用相同版本的提示词
- **质量保障**：通过严格的评分标准确保PRD质量

---

*文档版本：v2.1*  
*更新时间：2025-01-16*  
*维护者：PM.Dev Team*

---

## 更新日志

### v2.1 (2025-01-16)
- **优化竞品分析提示词**：增强内容质量要求，添加详细分析维度和字数要求
- **强化JSON格式控制**：严格要求纯JSON输出，优化解析逻辑
- **删除冗余组件**：移除 PRDHouseViewV4.tsx 和 documentGenerator.ts
- **完善PRD生成器**：使用本地 prd-generator.ts 替代AI生成

### v2.0 (2025-01-16)
- 初始版本：完整的PRD工具提示词设计和架构文档 